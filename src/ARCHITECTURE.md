# Краткое описание архитектуры

## Дереов проекта

```
AgencyAPI/ готовые маршруты для bruno

app/
├── Containers/ 
│ ├── Order/ Контейнер для сущностей связанных с заказом
│ │ ├── Actions/ 
│ │ ├── Controllers/
│ │ ├── Models/
│ │ ├── Requests/
│ │ ├── Tasks/
│ │ └── Transformers/
│ ├── Product/ Контейнер для сущностей связанных с продуктами
│ │ ├── Actions/ 
│ │ ├── Controllers/
│ │ ├── Models/
│ │ ├── Requests/
│ │ ├── Tasks/
│ │ └── Transformers/
│ └── User/  Контейнер  для сущностей связанных с пользователем
│   ├── Controllers/
│   ├── Models/
│   ├── Requests/
│   └── Transformers/
├── Enums/  
├── Http/
│    ├── Controllers/ базовый контроллер
│    └── Requests/ 
├── Notification/  уведомления
├── Providers/  Сервис провайдер
├── Services/  Cервисы
└── Transformers/  Абстрактный трансформер и общие
```

## Описание

В архитектуре проекта частично используется паттерн Porto без уровня корабля.

### User

В модуле User присуствует стандартная модель пользователя с добавлением поля roles и методов для работы с ним, а так же
подключены уведомления и добавлены get и set методы для полей

### Product

В модуле Product создана модель продуктов с минимальным количеством полей, а так же CRUD методы реализованые с
использованием Actions

### Order

Модуль Order отвечает за заказы и связь заказа с продуктами, вся логика создания заказа находится в Action и Task

---------------------

## Validation Rule

Для каждого маршрута в модулях присутсвует отедльные правила валидации, что позволяет гибко использовать маршруты
например для маршрута UpdateOrderStatus нетребуется указывать все обязательные поля запроса CreateOrder

```
CreateOrderRequest::class        // Полная валидация
UpdateOrderStatusRequest::class  // Только статус 
```

Проверка доступа к маршруту осущеслвялась в Request по роли админи или по авторизации

```
public function authorize(): bool
{
    return $this->user()->isAdmin();
}
```

## Transformers

Для одинакового формата вывода данных, модули используют трансформеры. В корне проекта находится абстрактный класс
трансформера, в котором можно размешать общие методы для всех трансформеров в проекте, например метод для каста валюты
передв выводом
